<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dairy-Lift - All Cattle</title>
  <meta name="description"
    content="View and manage all your cattle investments with Dairy-Lift." />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Additional Resources -->
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com/3.4.16"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.5.0/echarts.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <script src="js/auth.js"></script>
  <script>
    // Ensure auth.js is properly initialized
    document.addEventListener('DOMContentLoaded', function() {
      if (window.DairyLiftAuth) {
        console.log('Auth script loaded, initializing...');
        window.DairyLiftAuth.initAuth();

        // Check if user is logged in
        if (!window.DairyLiftAuth.isLoggedIn()) {
          console.log('User not logged in, redirecting to login page');
          window.location.href = 'login.html';
        }
      } else {
        console.error('Auth script not loaded properly');
        // Try to load it again
        var script = document.createElement('script');
        script.src = 'js/auth.js';
        script.onload = function() {
          console.log('Auth script loaded dynamically');
          if (window.DairyLiftAuth) {
            window.DairyLiftAuth.initAuth();
            // Check if user is logged in
            if (!window.DairyLiftAuth.isLoggedIn()) {
              console.log('User not logged in, redirecting to login page');
              window.location.href = 'login.html';
            }
          }
        };
        document.head.appendChild(script);
      }
    });

    // Listen for auth.js loaded event
    document.addEventListener('dairyLiftAuthLoaded', function(event) {
      console.log('Auth script loaded event received');
      if (window.DairyLiftAuth) {
        window.DairyLiftAuth.initAuth();
        // Check if user is logged in
        if (!window.DairyLiftAuth.isLoggedIn()) {
          console.log('User not logged in, redirecting to login page');
          window.location.href = 'login.html';
        }
      }
    });
  </script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: "#ad6ef5",
            secondary: "#8A2BE2",
          },
          borderRadius: {
            none: "0px",
            sm: "4px",
            DEFAULT: "8px",
            md: "12px",
            lg: "16px",
            xl: "20px",
            "2xl": "24px",
            "3xl": "32px",
            full: "9999px",
            button: "8px",
          },
          fontFamily: {
            sans: ["Inter", "sans-serif"],
          },
        },
      },
    };
  </script>
  <style>
    :root {
      --primary: #ad6ef5;
      --primary-foreground: #f8fafc;
      --primary-light: rgba(173, 110, 245, 0.2);
      --background: #ffffff;
      --foreground: #020617;
      --muted: #f1f5f9;
      --muted-foreground: #64748b;
      --border: #e2e8f0;
      --radius: 0.5rem;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
      scroll-padding-top: 80px;
    }

    body {
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      color: var(--foreground);
      background-color: var(--background);
      line-height: 1.5;
    }

    a {
      text-decoration: none;
      color: inherit;
    }

    img {
      max-width: 100%;
      height: auto;
    }

    .container {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
    }

    @media (min-width: 640px) {
      .container {
        padding: 0 1.5rem;
      }
    }

    @media (min-width: 1024px) {
      .container {
        padding: 0 2rem;
      }
    }

    /* Navbar Styles */
    .navbar {
      background-color: var(--background);
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      position: sticky;
      top: 0;
      z-index: 40;
      border-bottom: 1px solid var(--border);
    }

    .navbar-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      height: 4rem;
      position: relative;
      padding: 0.5rem 0;
      width: 100%;
    }

    .header-photo-container {
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 25px 0 15px;
      width: 70px;
      height: 70px;
      flex-shrink: 0;
    }

    .header-photo {
      width: 100%;
      height: 100%;
      object-fit: contain;
      border-radius: 50%;
      background-color: white;
      padding: 2px;
    }

    .logo {
      font-weight: bold;
      font-size: 1.5rem;
      color: var(--primary);
      min-width: 220px;
      text-align: left;
      margin-right: auto;
      display: inline-block;
      padding: 0 15px;
      text-decoration: none;
    }

    .desktop-nav {
      display: none;
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
    }

    .navbar-actions {
      display: none;
    }

    .mobile-menu-toggle {
      background: none;
      border: none;
      color: var(--primary);
      cursor: pointer;
      padding: 0.5rem;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      border-radius: 50%;
      transition: all 0.3s ease;
      overflow: hidden;
      z-index: 50;
      flex-shrink: 0;
      margin-right: 10px;
      margin-left: 0;
      border: 1px solid transparent;
    }

    .mobile-menu-toggle:hover {
      border-color: var(--primary-light);
      background-color: rgba(173, 110, 245, 0.1);
    }

    .nav-link {
      color: #333;
      text-decoration: none;
      padding: 8px 16px;
      font-weight: 500;
      position: relative;
    }

    .nav-link.active {
      color: var(--primary);
    }

    .nav-link.active::after {
      content: '';
      position: absolute;
      bottom: -4px;
      left: 0;
      width: 100%;
      height: 2px;
      background-color: var(--primary);
    }

    .mobile-menu-toggle:active {
      transform: scale(0.95);
    }

    .hamburger-lines {
      width: 24px;
      height: 18px;
      position: relative;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .hamburger-line {
      display: block;
      height: 3px;
      width: 100%;
      background-color: var(--primary);
      border-radius: 10px;
      transition: all 0.3s ease-in-out;
      transform-origin: center;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    }

    .mobile-menu-toggle.active .hamburger-line:nth-child(1) {
      transform: translateY(8px) rotate(45deg);
      width: 22px;
    }

    .mobile-menu-toggle.active .hamburger-line:nth-child(2) {
      opacity: 0;
      transform: translateX(-10px);
    }

    .mobile-menu-toggle.active .hamburger-line:nth-child(3) {
      transform: translateY(-8px) rotate(-45deg);
      width: 22px;
    }

    .mobile-menu-toggle::after {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      background-color: var(--primary-light);
      border-radius: 50%;
      z-index: -1;
      transform: scale(0);
      transition: transform 0.3s ease;
    }

    .mobile-menu-toggle:hover::after {
      transform: scale(1);
    }

    .menu-toggle-ripple {
      position: absolute;
      background-color: rgba(173, 110, 245, 0.3);
      border-radius: 50%;
      transform: scale(0);
      animation: ripple 0.6s linear;
      pointer-events: none;
    }

    @keyframes ripple {
      to {
        transform: scale(2);
        opacity: 0;
      }
    }

    .mobile-menu {
      position: fixed;
      top: 0;
      left: -280px;
      width: 280px;
      height: 100vh;
      background-color: var(--background);
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
      z-index: 1000;
      padding: 1.5rem 0;
      overflow-y: auto;
      transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      flex-direction: column;
      border-right: 1px solid var(--border);
    }

    .mobile-menu.active {
      transform: translateX(280px);
    }

    .mobile-menu-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 999;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
      backdrop-filter: blur(2px);
    }

    .mobile-menu-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .mobile-nav-link {
      display: flex;
      align-items: center;
      padding: 0.85rem 1.5rem;
      color: var(--foreground);
      text-decoration: none;
      font-weight: 500;
      transition: all 0.3s ease;
      position: relative;
      margin: 0.25rem 0.75rem;
      border-radius: 0.5rem;
    }

    .mobile-nav-link:hover {
      background-color: var(--muted);
      transform: translateX(5px);
    }

    .mobile-nav-link::after {
      content: '';
      position: absolute;
      left: 0;
      bottom: 0;
      height: 2px;
      width: 0;
      background-color: var(--primary);
      transition: width 0.3s ease;
    }

    .mobile-nav-link:hover::after {
      width: 30%;
    }

    .mobile-nav-link-primary {
      color: var(--primary);
      font-weight: 600;
      background-color: var(--primary-light);
      margin-top: 0.75rem;
    }

    .mobile-nav-link-primary:hover {
      background-color: var(--primary-light);
      transform: translateX(5px) scale(1.02);
      box-shadow: 0 4px 8px rgba(173, 110, 245, 0.15);
    }

    .mobile-menu-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem 1.5rem 1.5rem;
      border-bottom: 1px solid var(--border);
      margin-bottom: 1rem;
    }

    .mobile-menu-logo {
      font-family: 'Pacifico', cursive;
      font-size: 1.5rem;
      color: var(--primary);
      text-decoration: none;
    }

    .mobile-menu-close {
      background: none;
      border: none;
      color: var(--muted-foreground);
      cursor: pointer;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.2s ease;
    }

    .mobile-menu-close:hover {
      background-color: var(--muted);
      color: var(--foreground);
    }

    @media (min-width: 768px) {
      .desktop-nav {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 2.5rem;
      }

      .navbar-actions {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .mobile-menu-toggle {
        display: block;
      }

      .header-photo-container {
        width: 80px;
        height: 80px;
        margin: 0 30px 0 20px;
      }

      .logo {
        font-size: 1.5rem;
        min-width: 250px;
      }
    }

      .nav-link {
        position: relative;
        padding: 0.5rem 0;
        color: var(--foreground);
        transition: color 0.3s;
      }

      .nav-link:hover {
        color: var(--primary);
      }

      .nav-link::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 0;
        height: 2px;
        background-color: var(--primary);
        transition: width 0.3s;
      }

      .nav-link:hover::after {
        width: 100%;
      }

      .icon-link {
        padding: 0.5rem;
        color: var(--foreground);
        transition: color 0.3s;
      }

      .icon-link:hover {
        color: var(--primary);
      }
    }

    /* Remix Icons Fix */
    :where([class^="ri-"])::before { content: "\f3c2"; }

    /* Button Styles */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border-radius: var(--radius);
      font-weight: 500;
      padding: 0.5rem 1rem;
      transition: all 0.3s ease;
      cursor: pointer;
      border: none;
    }

    .btn-primary {
      background-color: var(--primary);
      color: var(--primary-foreground);
    }

    .btn-primary:hover {
      background-color: #9b55e0;
      box-shadow: 0 3px 10px rgba(173, 110, 245, 0.2);
    }

    .btn-secondary {
      background-color: white;
      color: var(--foreground);
      border: 1px solid var(--border);
    }

    .btn-secondary:hover {
      background-color: var(--muted);
    }

    .btn-outline {
      background-color: transparent;
      color: var(--foreground);
      border: 1px solid var(--border);
    }

    .btn-outline:hover {
      background-color: var(--muted);
    }

    /* Profile Icon Styles */
    .profile-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: var(--primary-light);
      color: var(--primary);
      transition: all 0.3s ease;
    }

    .profile-icon:hover {
      background-color: var(--primary-light);
      transform: scale(1.05);
      box-shadow: 0 0 10px rgba(173, 110, 245, 0.2);
    }

    .btn-outline-primary {
      background-color: transparent;
      color: var(--primary);
      border: 1px solid var(--primary);
    }

    .btn-outline-primary:hover {
      background-color: var(--primary-light);
    }

    /* Cattle specific styles */
    .header {
      margin-bottom: 2rem;
    }

    h1 {
      font-size: 1.875rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }

    p {
      color: var(--muted-foreground);
    }

    .filters {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    @media (min-width: 768px) {
      .filters {
        flex-direction: row;
      }
    }

    .filter-group {
      flex: 1;
    }

    label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
    }

    select {
      width: 100%;
      padding: 0.5rem 1rem;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      background-color: var(--background);
      font-size: 0.875rem;
      outline: none;
    }

    select:focus {
      border-color: var(--ring);
      box-shadow: 0 0 0 2px rgba(155, 135, 245, 0.2);
    }

    /* Content Spacing */
    .mt-8 {
      margin-top: 2rem;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(1, 1fr);
      gap: 1.5rem;
    }

    @media (min-width: 640px) {
      .grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (min-width: 1024px) {
      .grid {
        grid-template-columns: repeat(4, 1fr);
      }
    }

    .cattle-card {
      border-radius: var(--radius);
      overflow: hidden;
      background-color: var(--card);
      border: 1px solid var(--border);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      height: 100%;
    }

    .cattle-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }

    .image-container {
      aspect-ratio: 16 / 9;
      overflow: hidden;
    }

    .image-container img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .card-content {
      padding: 1rem;
    }

    .card-header {
      margin-bottom: 1rem;
    }

    .card-title {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 0.25rem;
    }

    .card-subtitle {
      font-size: 0.875rem;
      color: var(--muted-foreground);
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 0.75rem;
      margin-bottom: 1rem;
    }

    .stat {
      display: flex;
      gap: 0.5rem;
    }

    .stat-icon {
      color: var(--muted-foreground);
      width: 1rem;
      text-align: center;
    }

    .stat-content p {
      font-size: 0.875rem;
      margin: 0;
    }

    .stat-label {
      color: var(--muted-foreground);
    }

    .stat-value {
      font-weight: 500;
    }

    .card-footer {
      padding: 0 1rem 1rem 1rem;
    }

    .btn {
      display: inline-block;
      width: 100%;
      padding: 0.5rem 1rem;
      background-color: transparent;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      font-size: 0.875rem;
      font-weight: 500;
      text-align: center;
      cursor: pointer;
      transition: background-color 0.2s ease, border-color 0.2s ease;
    }

    .btn:hover {
      background-color: var(--secondary);
      border-color: var(--muted);
    }

    /* Health status colors */
    .health-excellent {
      color: #10b981;
    }

    .health-good {
      color: #22c55e;
    }

    .health-fair {
      color: #f59e0b;
    }

    .health-poor {
      color: #ef4444;
    }

    /* Modal */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 50;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s ease;
    }

    .modal.open {
      opacity: 1;
      pointer-events: auto;
    }

    .modal-content {
      background-color: var(--background);
      border-radius: var(--radius);
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      width: 90%;
      max-width: 800px;
      max-height: 90vh;
      overflow-y: auto;
      padding: 1.5rem;
      position: relative;
      animation: modal-in 0.3s ease-out forwards;
    }

    @keyframes modal-in {
      from {
        opacity: 0;
        transform: scale(0.95);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }

    .modal-title {
      font-size: 1.5rem;
      font-weight: 600;
    }

    .close-button {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--muted-foreground);
    }

    .modal-image {
      width: 100%;
      height: 300px;
      overflow: hidden;
      border-radius: var(--radius);
      margin-bottom: 1.5rem;
    }

    .modal-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* Tabs */
    .tabs {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 0.5rem;
      margin-bottom: 1.5rem;
    }

    .tab {
      padding: 0.75rem;
      text-align: center;
      cursor: pointer;
      border-bottom: 2px solid transparent;
      transition: border-color 0.2s ease;
      font-weight: 500;
    }

    .tab.active {
      border-bottom-color: var(--primary);
      color: var(--primary);
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    /* Info cards */
    .info-card {
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1rem;
      margin-bottom: 1rem;
    }

    .info-card h3 {
      font-weight: 600;
      margin-bottom: 1rem;
    }

    .info-grid {
      display: grid;
      grid-template-columns: auto 1fr;
      column-gap: 1rem;
      row-gap: 0.5rem;
    }

    .info-label {
      color: var(--muted-foreground);
      font-size: 0.875rem;
    }

    .info-value {
      font-size: 0.875rem;
      font-weight: 500;
    }

    /* Progress bars */
    .progress-container {
      margin-bottom: 1rem;
    }

    .progress-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
    }

    .progress-label {
      font-size: 0.875rem;
      font-weight: 500;
    }

    .progress-value {
      font-size: 0.875rem;
      color: var(--muted-foreground);
    }

    .progress-bar {
      height: 0.5rem;
      background-color: var(--secondary);
      border-radius: 9999px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background-color: var(--primary);
      transition: width 1s ease-out;
      border-radius: 9999px;
    }

    /* Chart container */
    .chart-container {
      height: 220px;
      margin-bottom: 1rem;
    }

    /* Stats cards */
    .stats-container {
      display: grid;
      grid-template-columns: repeat(1, 1fr);
      gap: 1rem;
      margin-top: 1.5rem;
    }

    @media (min-width: 640px) {
      .stats-container {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    .stat-card {
      background-color: var(--secondary);
      border-radius: var(--radius);
      padding: 0.75rem;
      text-align: center;
    }

    .stat-card-label {
      font-size: 0.875rem;
      color: var(--muted-foreground);
      margin-bottom: 0.25rem;
    }

    .stat-card-value {
      font-size: 1.25rem;
      font-weight: 700;
    }

    /* Tables */
    table {
      width: 100%;
      border-collapse: collapse;
    }

    th, td {
      text-align: left;
      padding: 0.75rem 1rem;
      border-bottom: 1px solid var(--border);
    }

    th {
      font-weight: 500;
    }

    /* Modal footer */
    .modal-footer {
      display: flex;
      justify-content: flex-end;
      gap: 0.5rem;
      margin-top: 1.5rem;
    }

    /* Grid layouts for modal sections */
    .two-columns {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    @media (min-width: 768px) {
      .two-columns {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    /* Animations */
    @keyframes fade-in {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .animate-fade-in {
      animation: fade-in 0.5s ease-out forwards;
    }

    /* Empty state */
    .empty-state {
      text-align: center;
      padding: 3rem 0;
    }

    .empty-state p {
      font-size: 1.25rem;
      color: var(--muted-foreground);
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="navbar" style="padding:10px">
    <div class="container" style="margin:0px">
      <div class="navbar-content">
        <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="Toggle menu">
          <div class="hamburger-lines">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </div>
        </button>
        <div class="header-photo-container">
          <img src="image/no background.png" alt="Header Photo" class="header-photo">
        </div>
        <a href="#" class="logo" style="font-family: 'Pacifico', cursive; color: var(--primary);">Dairy-Lift</a>
        <nav class="desktop-nav">
          <a href="./index.html" class="nav-link">Home</a>
          <a href="./dashboard.html" class="nav-link">Dashboard</a>
          <a href="./YourCattle.html" class="nav-link active">All Cattle</a>
          <a href="./store.html" class="nav-link">Store</a>
          <a href="visit-farm.html" class="nav-link">Visit Farm</a>
          <a href="./admin-dashboard.html" class="nav-link">Admin</a>
        </nav>
        <div class="navbar-actions">
          <a href="watchliststore.html" class="btn btn-icon">
            <i class="fas fa-heart"></i>
          </a>
          <a href="login.html" class="btn btn-primary">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
            Login
          </a>
        </div>
      </div>
    </div>

    <div class="mobile-menu-overlay" id="mobile-menu-overlay"></div>
    <div class="mobile-menu" id="mobile-menu">
      <div class="mobile-menu-header">
        <a href="home_page.html" class="mobile-menu-logo">Dairy-Lift</a>
        <button class="mobile-menu-close" id="mobile-menu-close" aria-label="Close menu">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <a href="filesforbuycattle/dist/index.html" class="mobile-nav-link">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
        <span style="margin-left: 10px;">Buy Cattle</span>
      </a>
      <a href="./biogas/home.html" class="mobile-nav-link">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
          <circle cx="9" cy="21" r="1"></circle>
          <circle cx="20" cy="21" r="1"></circle>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
        <span style="margin-left: 10px;">Bio-Gas</span>
      </a>

      <a href="visit-farm.html" class="mobile-nav-link">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
          <rect x="3" y="3" width="7" height="7"></rect>
          <rect x="14" y="3" width="7" height="7"></rect>
          <rect x="14" y="14" width="7" height="7"></rect>
          <rect x="3" y="14" width="7" height="7"></rect>
        </svg>
        <span style="margin-left: 10px;">Visit Farm</span>
      </a>
      <a href="navhome.html" class="mobile-nav-link">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
          <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
          <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
          <line x1="12" y1="22.08" x2="12" y2="12"></line>
        </svg>
        <span style="margin-left: 10px;">Insurance</span>
      </a>
      <a href="admin-dashboard.html" class="mobile-nav-link">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
          <path d="M20 14.66V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5.34"></path>
          <polygon points="18 2 22 6 12 16 8 16 8 12 18 2"></polygon>
        </svg>
        <span style="margin-left: 10px;">Register Cattle</span>
      </a>
      <a href="#" class="mobile-nav-link">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
          <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
          <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
        </svg>
        <span style="margin-left: 10px;">Contact-Us</span>
      </a>
      <a href="help/home.html" class="mobile-nav-link">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
          <circle cx="12" cy="12" r="10"></circle>
          <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
          <line x1="12" y1="17" x2="12.01" y2="17"></line>
        </svg>
        <span style="margin-left: 10px;">Support</span>
      </a>
      <a href="login.html" class="mobile-nav-link mobile-nav-link-primary">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
          <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
          <polyline points="10 17 15 12 10 7"></polyline>
          <line x1="15" y1="12" x2="3" y2="12"></line>
        </svg>
        <span style="margin-left: 10px;">Login / Register</span>
      </a>
    </div>
    </div>
  </header>

  <div class="container mt-8">
    <div class="header">
      <h1>Your Cattle</h1>
      <p>Manage and monitor your dairy cattle investments</p>
    </div>

    <div class="filters">
      <div class="filter-group">
        <label for="cattleFilter">Filter Cattle</label>
        <select id="cattleFilter">
          <option value="all">All Cattle</option>
          <option value="active">Active (Lactating)</option>
          <option value="dry">Dry (Non-lactating)</option>
        </select>
      </div>
      <div class="filter-group">
        <label for="sortOrder">Sort By</label>
        <select id="sortOrder">
          <option value="newest">Newest First</option>
          <option value="oldest">Oldest First</option>
          <option value="production">Highest Production</option>
        </select>
      </div>
    </div>

    <div id="cattleGrid" class="grid">
      <!-- Cattle cards will be inserted here -->
    </div>

    <div id="emptyCattle" class="empty-state" style="display: none;">
      <p>No cattle match your current filters.</p>
    </div>
  </div>

  <!-- Cattle Details Modal -->
  <div id="cattleModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modalTitle" class="modal-title"></h2>
        <button id="closeModal" class="close-button">&times;</button>
      </div>

      <div class="modal-image">
        <img id="modalImage" src="" alt="Cattle">
      </div>

      <div class="tabs">
        <div class="tab active" data-tab="overview">Overview</div>
        <div class="tab" data-tab="production">Production</div>
        <div class="tab" data-tab="health">Health</div>
        <div class="tab" data-tab="fertility">Fertility</div>
      </div>

      <div id="overviewTab" class="tab-content active">
        <div class="two-columns">
          <div class="info-card">
            <h3>Current Status</h3>
            <div class="info-grid">
              <span class="info-label">Health:</span>
              <span id="modalHealth" class="info-value"></span>

              <span class="info-label">Lactation:</span>
              <span id="modalLactation" class="info-value"></span>

              <span class="info-label">Daily Production:</span>
              <span id="modalProduction" class="info-value"></span>

              <span class="info-label">Age:</span>
              <span id="modalAge" class="info-value"></span>

              <span class="info-label">Breed:</span>
              <span id="modalBreed" class="info-value"></span>
            </div>
          </div>

          <div class="info-card">
            <h3>Daily Feed Consumption</h3>
            <div class="chart-container">
              <canvas id="feedChart"></canvas>
            </div>
          </div>
        </div>

        <div class="info-card">
          <h3>Health Metrics</h3>
          <div class="progress-container">
            <div class="progress-header">
              <span class="progress-label">Temperature</span>
              <span class="progress-value">38.5°C (Normal: 39°C)</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" style="width: 0%" data-width="98.7%"></div>
            </div>
          </div>

          <div class="progress-container">
            <div class="progress-header">
              <span class="progress-label">Heart Rate</span>
              <span class="progress-value">72 BPM (Normal: 75 BPM)</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" style="width: 0%" data-width="96%"></div>
            </div>
          </div>

          <div class="progress-container">
            <div class="progress-header">
              <span class="progress-label">Respiration</span>
              <span class="progress-value">26 BPM (Normal: 30 BPM)</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" style="width: 0%" data-width="86.7%"></div>
            </div>
          </div>
        </div>
      </div>

      <div id="productionTab" class="tab-content">
        <div class="info-card">
          <h3>Milk Production History</h3>
          <div class="chart-container">
            <canvas id="milkProductionChart"></canvas>
          </div>

          <div class="stats-container">
            <div class="stat-card">
              <p class="stat-card-label">Daily Average</p>
              <p class="stat-card-value">29.8 L</p>
            </div>
            <div class="stat-card">
              <p class="stat-card-label">Weekly Total</p>
              <p class="stat-card-value">209 L</p>
            </div>
            <div class="stat-card">
              <p class="stat-card-label">Peak Production</p>
              <p class="stat-card-value">32 L</p>
            </div>
          </div>
        </div>
      </div>

      <div id="healthTab" class="tab-content">
        <div class="info-card">
          <h3>Health Records</h3>
          <table>
            <thead>
              <tr>
                <th>Date</th>
                <th>Procedure</th>
                <th>Performed By</th>
                <th>Notes</th>
              </tr>
            </thead>
            <tbody id="healthRecordsBody">
              <!-- Health records will be dynamically added here -->
            </tbody>
          </table>
        </div>
      </div>

      <div id="fertilityTab" class="tab-content">
        <div class="info-card">
          <h3>Fertility & Reproduction</h3>
          <table>
            <thead>
              <tr>
                <th>Date</th>
                <th>Event</th>
                <th>Notes</th>
              </tr>
            </thead>
            <tbody id="fertilityRecordsBody">
              <!-- Fertility records will be dynamically added here -->
            </tbody>
          </table>
        </div>
      </div>

      <div class="modal-footer">
        <button id="nextSectionBtn" class="btn">Next Section</button>
        <button id="closeBtn" class="btn">Close</button>
      </div>
    </div>
  </div>

  <!-- Required scripts -->
  <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.9/dist/chart.umd.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Sample cattle data
      let cattleData = [
        {
          id: '1',
          name: 'Bella',
          breed: 'Holstein',
          age: '4 years old',
          image: 'https://images.unsplash.com/photo-1465379944081-7f47de8d74ac?auto=format&fit=crop&w=600&q=80',
          health: 'Excellent',
          lactationStatus: 'Active',
          dailyProduction: '32 liters',
          purchaseDate: 'Jun 15, 2022'
        },
        {
          id: '2',
          name: 'Daisy',
          breed: 'Jersey',
          age: '3 years old',
          image: 'https://images.unsplash.com/photo-1452378174528-3090a4bba7b2?auto=format&fit=crop&w=600&q=80',
          health: 'Good',
          lactationStatus: 'Active',
          dailyProduction: '28 liters',
          purchaseDate: 'Aug 22, 2022'
        },
        {
          id: '3',
          name: 'Rosie',
          breed: 'Brown Swiss',
          age: '5 years old',
          image: 'https://images.unsplash.com/photo-1472396961693-142e6e269027?auto=format&fit=crop&w=600&q=80',
          health: 'Fair',
          lactationStatus: 'Dry',
          dailyProduction: '0 liters',
          purchaseDate: 'Mar 10, 2022'
        },
        {
          id: '4',
          name: 'Mabel',
          breed: 'Holstein',
          age: '2 years old',
          image: 'https://images.unsplash.com/photo-1466721591366-2d5fba72006d?auto=format&fit=crop&w=600&q=80',
          health: 'Excellent',
          lactationStatus: 'Active',
          dailyProduction: '25 liters',
          purchaseDate: 'Sep 05, 2022'
        },
        {
          id: '5',
          name: 'Clover',
          breed: 'Guernsey',
          age: '4 years old',
          image: 'https://images.unsplash.com/photo-1604437676724-870fb77a80c7?auto=format&fit=crop&w=600&q=80',
          health: 'Good',
          lactationStatus: 'Active',
          dailyProduction: '30 liters',
          purchaseDate: 'Feb 18, 2022'
        },
        {
          id: '6',
          name: 'Buttercup',
          breed: 'Jersey',
          age: '6 years old',
          image: 'https://images.unsplash.com/photo-1497005367839-6e852de72767?auto=format&fit=crop&w=600&q=80',
          health: 'Fair',
          lactationStatus: 'Dry',
          dailyProduction: '0 liters',
          purchaseDate: 'Jan 05, 2022'
        },
        {
          id: '7',
          name: 'Elsie',
          breed: 'Holstein',
          age: '3 years old',
          image: 'https://images.unsplash.com/photo-1535022535846-27063fcce3e7?auto=format&fit=crop&w=600&q=80',
          health: 'Excellent',
          lactationStatus: 'Active',
          dailyProduction: '29 liters',
          purchaseDate: 'Apr 30, 2022'
        },
        {
          id: '8',
          name: 'Maggie',
          breed: 'Brown Swiss',
          age: '5 years old',
          image: 'https://images.unsplash.com/photo-1596733430284-f7437764b1a9?auto=format&fit=crop&w=600&q=80',
          health: 'Poor',
          lactationStatus: 'Dry',
          dailyProduction: '0 liters',
          purchaseDate: 'Dec 10, 2021'
        }
      ];

      // Load any new cattle data from localStorage
      try {
        const storedCattle = JSON.parse(localStorage.getItem('newCattle')) || [];
        console.log('Found stored cattle data:', storedCattle);

        if (Array.isArray(storedCattle) && storedCattle.length > 0) {
          // Generate new IDs for the stored cattle
          storedCattle.forEach(cattle => {
            // Find the highest existing ID and increment by 1
            const highestId = Math.max(...cattleData.map(c => parseInt(c.id)));
            const newId = (highestId + 1).toString();
            cattle.id = newId;

            // Log each cattle being added
            console.log('Adding cattle to display:', cattle);

            cattleData.push(cattle);
          });
          // Clear the localStorage after adding to prevent duplicates
          localStorage.removeItem('newCattle');

          // Log the updated cattle data
          console.log('Updated cattle data:', cattleData);
        }
      } catch (error) {
        console.error('Error loading cattle data from localStorage:', error);
      }

      // Health records data
      const healthRecords = [
        { id: 1, date: '2023-04-15', procedure: 'Health Check', performer: 'Dr. Smith', notes: 'All vitals normal' },
        { id: 2, date: '2023-03-12', procedure: 'Vaccination', performer: 'Dr. Patel', notes: 'FMD vaccine administered' },
        { id: 3, date: '2023-02-23', procedure: 'Deworming', performer: 'Farm Staff', notes: 'Scheduled treatment' },
        { id: 4, date: '2023-01-10', procedure: 'Health Check', performer: 'Dr. Smith', notes: 'Slight fever treated' }
      ];

      // Fertility records data
      const fertilityRecords = [
        { id: 1, date: '2022-06-15', event: 'Heat Detection', notes: 'Normal cycle observed' },
        { id: 2, date: '2022-07-10', event: 'Insemination', notes: 'Artificial insemination performed' },
        { id: 3, date: '2022-07-31', event: 'Pregnancy Check', notes: 'Confirmed pregnant' },
        { id: 4, date: '2023-04-15', event: 'Calving', notes: 'Healthy female calf delivered' },
        { id: 5, date: '2023-05-20', event: 'First Heat Post-Calving', notes: 'Normal cycle returned' }
      ];

      // DOM elements
      const cattleGrid = document.getElementById('cattleGrid');
      const emptyCattle = document.getElementById('emptyCattle');
      const cattleFilter = document.getElementById('cattleFilter');
      const sortOrder = document.getElementById('sortOrder');
      const modal = document.getElementById('cattleModal');
      const closeModal = document.getElementById('closeModal');
      const closeBtn = document.getElementById('closeBtn');
      const nextSectionBtn = document.getElementById('nextSectionBtn');
      const tabs = document.querySelectorAll('.tab');
      const modalTitle = document.getElementById('modalTitle');
      const modalImage = document.getElementById('modalImage');
      const modalHealth = document.getElementById('modalHealth');
      const modalLactation = document.getElementById('modalLactation');
      const modalProduction = document.getElementById('modalProduction');
      const modalAge = document.getElementById('modalAge');
      const modalBreed = document.getElementById('modalBreed');
      const healthRecordsBody = document.getElementById('healthRecordsBody');
      const fertilityRecordsBody = document.getElementById('fertilityRecordsBody');

      // Chart references
      let feedChart = null;
      let milkProductionChart = null;

      // Initialize health and fertility records
      function populateHealthRecords() {
        healthRecordsBody.innerHTML = '';

        healthRecords.forEach(record => {
          const row = document.createElement('tr');
          row.innerHTML = `
            <td>${record.date}</td>
            <td>${record.procedure}</td>
            <td>${record.performer}</td>
            <td>${record.notes}</td>
          `;
          healthRecordsBody.appendChild(row);
        });
      }

      function populateFertilityRecords() {
        fertilityRecordsBody.innerHTML = '';

        fertilityRecords.forEach(record => {
          const row = document.createElement('tr');
          row.innerHTML = `
            <td>${record.date}</td>
            <td>${record.event}</td>
            <td>${record.notes}</td>
          `;
          fertilityRecordsBody.appendChild(row);
        });
      }

      // Helper function to get health class
      function getHealthClass(health) {
        switch (health) {
          case 'Excellent': return 'health-excellent';
          case 'Good': return 'health-good';
          case 'Fair': return 'health-fair';
          case 'Poor': return 'health-poor';
          default: return '';
        }
      }

      // Filter and sort cattle
      function filterAndSortCattle() {
        const filter = cattleFilter.value;
        const sort = sortOrder.value;

        return cattleData
          .filter(cattle => {
            if (filter === 'all') return true;
            if (filter === 'active') return cattle.lactationStatus === 'Active';
            if (filter === 'dry') return cattle.lactationStatus === 'Dry';
            return true;
          })
          .sort((a, b) => {
            if (sort === 'newest') {
              return new Date(b.purchaseDate).getTime() - new Date(a.purchaseDate).getTime();
            }
            if (sort === 'oldest') {
              return new Date(a.purchaseDate).getTime() - new Date(b.purchaseDate).getTime();
            }
            if (sort === 'production') {
              const aProduction = parseInt(a.dailyProduction) || 0;
              const bProduction = parseInt(b.dailyProduction) || 0;
              return bProduction - aProduction;
            }
            return 0;
          });
      }

      // Render cattle cards
      function renderCattleCards() {
        const filteredCattle = filterAndSortCattle();
        cattleGrid.innerHTML = '';

        if (filteredCattle.length === 0) {
          emptyCattle.style.display = 'block';
          return;
        }

        emptyCattle.style.display = 'none';

        filteredCattle.forEach((cattle, index) => {
          const card = document.createElement('div');
          card.className = 'cattle-card animate-fade-in';
          card.style.animationDelay = `${index * 0.1}s`;

          const healthClass = getHealthClass(cattle.health || 'Good');

          // Ensure all required properties exist
          const cattleData = {
            image: cattle.image || 'https://images.unsplash.com/photo-1465379944081-7f47de8d74ac?auto=format&fit=crop&w=600&q=80',
            name: cattle.name || 'Unnamed',
            breed: cattle.breed || 'Unknown',
            age: cattle.age || 'Unknown age',
            health: cattle.health || 'Good',
            lactationStatus: cattle.lactationStatus || 'Active',
            dailyProduction: cattle.dailyProduction || '0 liters',
            purchaseDate: cattle.purchaseDate || 'Unknown',
            id: cattle.id
          };

          card.innerHTML = `
            <div class="image-container">
              <img src="${cattleData.image}" alt="${cattleData.name}">
            </div>
            <div class="card-content">
              <div class="card-header">
                <h3 class="card-title">${cattleData.name}</h3>
                <p class="card-subtitle">${cattleData.breed} · ${cattleData.age}</p>
              </div>
              <div class="stats-grid">
                <div class="stat">
                  <div class="stat-icon">
                    <i class="fas fa-thermometer-half"></i>
                  </div>
                  <div class="stat-content">
                    <p class="stat-label">Health</p>
                    <p class="stat-value ${healthClass}">${cattleData.health}</p>
                  </div>
                </div>
                <div class="stat">
                  <div class="stat-icon">
                    <i class="fas fa-heart"></i>
                  </div>
                  <div class="stat-content">
                    <p class="stat-label">Lactation</p>
                    <p class="stat-value">${cattleData.lactationStatus}</p>
                  </div>
                </div>
                <div class="stat">
                  <div class="stat-icon">
                    <i class="fas fa-chart-bar"></i>
                  </div>
                  <div class="stat-content">
                    <p class="stat-label">Daily Production</p>
                    <p class="stat-value">${cattleData.dailyProduction}</p>
                  </div>
                </div>
                <div class="stat">
                  <div class="stat-icon">
                    <i class="fas fa-calendar"></i>
                  </div>
                  <div class="stat-content">
                    <p class="stat-label">Purchased</p>
                    <p class="stat-value">${cattleData.purchaseDate}</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="card-footer">
              <button class="btn view-details" data-id="${cattleData.id}">View Details</button>
            </div>
          `;

          cattleGrid.appendChild(card);
        });

        // Add click events to view details buttons
        document.querySelectorAll('.view-details').forEach(button => {
          button.addEventListener('click', function() {
            const cattleId = this.getAttribute('data-id');
            const selectedCattle = cattleData.find(c => c.id === cattleId);
            if (selectedCattle) {
              openCattleModal(selectedCattle);
            }
          });
        });
      }

      // Chart initialization
      function initFeedChart() {
        const ctx = document.getElementById('feedChart').getContext('2d');

        if (feedChart) {
          feedChart.destroy();
        }

        feedChart = new Chart(ctx, {
          type: 'bar',
          data: {
            labels: ['Grass', 'Hay', 'Silage', 'Supplements'],
            datasets: [{
              data: [40, 30, 20, 10],
              backgroundColor: [
                'rgba(155, 135, 245, 0.8)',
                'rgba(155, 135, 245, 0.6)',
                'rgba(155, 135, 245, 0.4)',
                'rgba(155, 135, 245, 0.2)'
              ],
              borderWidth: 0,
              borderRadius: 4
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              y: {
                beginAtZero: true
              }
            },
            plugins: {
              legend: {
                display: false
              }
            },
            animation: {
              duration: 1500,
              easing: 'easeOutQuart'
            }
          }
        });
      }

      function initMilkProductionChart() {
        const ctx = document.getElementById('milkProductionChart').getContext('2d');

        if (milkProductionChart) {
          milkProductionChart.destroy();
        }

        milkProductionChart = new Chart(ctx, {
          type: 'line',
          data: {
            labels: ['Apr 1', 'Apr 2', 'Apr 3', 'Apr 4', 'Apr 5', 'Apr 6', 'Apr 7'],
            datasets: [{
              label: 'Milk Production (Liters)',
              data: [28, 29, 30, 31, 32, 30, 29],
              fill: false,
              borderColor: '#9b87f5',
              tension: 0.4,
              pointBackgroundColor: '#9b87f5',
              pointRadius: 4
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              y: {
                beginAtZero: false,
                min: 25
              }
            },
            plugins: {
              legend: {
                display: false
              }
            },
            animation: {
              duration: 1500,
              easing: 'easeOutQuart'
            }
          }
        });
      }

      // Initialize progress bars
      function animateProgressBars() {
        const progressFills = document.querySelectorAll('.progress-fill');
        progressFills.forEach(fill => {
          const width = fill.getAttribute('data-width');
          fill.style.width = '0%';

          setTimeout(() => {
            fill.style.width = width;
          }, 100);
        });
      }

      // Tab functionality
      function setActiveTab(tabName) {
        const allTabs = document.querySelectorAll('.tab');
        const allContents = document.querySelectorAll('.tab-content');

        allTabs.forEach(tab => tab.classList.remove('active'));
        allContents.forEach(content => content.classList.remove('active'));

        document.querySelector(`.tab[data-tab="${tabName}"]`).classList.add('active');
        document.getElementById(`${tabName}Tab`).classList.add('active');

        // Initialize charts for specific tabs
        if (tabName === 'overview') {
          initFeedChart();
          animateProgressBars();
        } else if (tabName === 'production') {
          initMilkProductionChart();
        }
      }

      // Modal functionality
      function openCattleModal(cattle) {
        // Ensure all required properties exist
        const cattleData = {
          name: cattle.name || 'Unnamed',
          health: cattle.health || 'Good',
          image: cattle.image || 'https://images.unsplash.com/photo-1465379944081-7f47de8d74ac?auto=format&fit=crop&w=600&q=80',
          lactationStatus: cattle.lactationStatus || 'Active',
          dailyProduction: cattle.dailyProduction || '0 liters',
          age: cattle.age || 'Unknown age',
          breed: cattle.breed || 'Unknown'
        };

        modalTitle.textContent = cattleData.name;
        modalTitle.className = `modal-title ${getHealthClass(cattleData.health)}`;
        modalImage.src = cattleData.image;
        modalImage.alt = `Cattle ${cattleData.name}`;
        modalHealth.textContent = cattleData.health;
        modalHealth.className = `info-value ${getHealthClass(cattleData.health)}`;
        modalLactation.textContent = cattleData.lactationStatus;
        modalProduction.textContent = cattleData.dailyProduction;
        modalAge.textContent = cattleData.age;
        modalBreed.textContent = cattleData.breed;

        // Populate health and fertility records
        populateHealthRecords();
        populateFertilityRecords();

        // Reset to overview tab
        setActiveTab('overview');

        // Show modal
        modal.classList.add('open');
      }

      function closeModalFn() {
        modal.classList.remove('open');
      }

      // Event listeners
      cattleFilter.addEventListener('change', renderCattleCards);
      sortOrder.addEventListener('change', renderCattleCards);

      closeModal.addEventListener('click', closeModalFn);
      closeBtn.addEventListener('click', closeModalFn);

      // Tab click event
      tabs.forEach(tab => {
        tab.addEventListener('click', function() {
          const tabName = this.getAttribute('data-tab');
          setActiveTab(tabName);
        });
      });

      nextSectionBtn.addEventListener('click', function() {
        const tabs = ['overview', 'production', 'health', 'fertility'];
        const activeTab = document.querySelector('.tab.active').getAttribute('data-tab');
        const currentIndex = tabs.indexOf(activeTab);
        const nextIndex = (currentIndex + 1) % tabs.length;
        setActiveTab(tabs[nextIndex]);
      });

      // Close modal when clicking outside
      modal.addEventListener('click', function(e) {
        if (e.target === modal) {
          closeModalFn();
        }
      });

      // Initial render
      renderCattleCards();

      // Communicate height to parent frame
      function updateParentHeight() {
        const height = document.body.scrollHeight;
        if (window.parent && window.parent !== window) {
          window.parent.postMessage({ type: 'iframe-height', height: height }, '*');
        }
      }

      // Update height after content loads
      window.addEventListener('load', function() {
        updateParentHeight();
        // Also update after a short delay to account for dynamic content
        setTimeout(updateParentHeight, 500);
      });

      // Update height when window resizes
      window.addEventListener('resize', updateParentHeight);

      // Mobile Menu Toggle
      const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
      const mobileMenu = document.getElementById('mobile-menu');
      const mobileMenuClose = document.getElementById('mobile-menu-close');
      const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
      const body = document.body;

      // Function to open mobile menu
      function openMobileMenu() {
        mobileMenu.classList.add('active');
        mobileMenuOverlay.classList.add('active');
        mobileMenuToggle.classList.add('active');
        body.style.overflow = 'hidden'; // Prevent scrolling when menu is open

        // Add a subtle ripple effect on click
        const ripple = document.createElement('span');
        ripple.classList.add('menu-toggle-ripple');
        mobileMenuToggle.appendChild(ripple);

        // Position the ripple where the click happened
        const rect = mobileMenuToggle.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height) * 2;

        ripple.style.width = ripple.style.height = `${size}px`;
        ripple.style.left = `${-size/4}px`;
        ripple.style.top = `${-size/4}px`;

        // Remove the ripple after animation completes
        setTimeout(() => {
          ripple.remove();
        }, 600);

        // Add entrance animation to each nav link
        const navLinks = mobileMenu.querySelectorAll('.mobile-nav-link');
        navLinks.forEach((link, index) => {
          link.style.opacity = '0';
          link.style.transform = 'translateX(-10px)';
          link.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
          link.style.transitionDelay = `${0.05 * (index + 1)}s`;

          setTimeout(() => {
            link.style.opacity = '1';
            link.style.transform = 'translateX(0)';
          }, 10);
        });
      }

      // Function to close mobile menu
      function closeMobileMenu() {
        mobileMenu.classList.remove('active');
        mobileMenuOverlay.classList.remove('active');
        mobileMenuToggle.classList.remove('active');
        body.style.overflow = ''; // Restore scrolling
      }

      // Toggle menu when clicking the hamburger button
      mobileMenuToggle.addEventListener('click', function(event) {
        event.stopPropagation();
        if (mobileMenu.classList.contains('active')) {
          closeMobileMenu();
        } else {
          openMobileMenu();
        }
      });

      // Close menu when clicking the close button
      mobileMenuClose.addEventListener('click', closeMobileMenu);

      // Close menu when clicking the overlay
      mobileMenuOverlay.addEventListener('click', closeMobileMenu);

      // Close mobile menu when clicking on a link
      const mobileLinks = document.querySelectorAll('.mobile-nav-link');
      mobileLinks.forEach(link => {
        link.addEventListener('click', closeMobileMenu);
      });

      // Close mobile menu when pressing Escape key
      document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape' && mobileMenu.classList.contains('active')) {
          closeMobileMenu();
        }
      });
    });
  </script>

  <!-- Footer -->
  <footer class="bg-gray-900 text-white py-12 mt-16">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-8">
        <div>
          <h3 class="text-lg font-semibold mb-4">About Dairy-Lift</h3>
          <p class="text-gray-400 mb-4">
            Dairy-Lift connects investors with premium dairy cattle operations,
            providing stable returns and transparent management.
          </p>
          <div class="flex space-x-4">
            <a href="#" class="text-gray-400 hover:text-white transition-colors">
              <i class="ri-facebook-fill"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-white transition-colors">
              <i class="ri-twitter-fill"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-white transition-colors">
              <i class="ri-instagram-fill"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-white transition-colors">
              <i class="ri-linkedin-fill"></i>
            </a>
          </div>
        </div>
        <div>
          <h3 class="text-lg font-semibold mb-4">Quick Links</h3>
          <ul class="space-y-3">
            <li>
              <a
                href="aboutus.html"
                class="text-gray-400 hover:text-white transition-colors"
                >About Us</a
              >
            </li>
            <li>
              <a
                href="#"
                class="text-gray-400 hover:text-white transition-colors"
                >Investment Options</a
              >
            </li>
            <li>
              <a
                href="#"
                class="text-gray-400 hover:text-white transition-colors"
                >Performance Reports</a
              >
            </li>
            <li>
              <a
                href="#"
                class="text-gray-400 hover:text-white transition-colors"
                >Farm Tours</a
              >
            </li>
            <li>
              <a
                href="#"
                class="text-gray-400 hover:text-white transition-colors"
                >Testimonials</a
              >
            </li>
            <li>
              <a
                href="#"
                class="text-gray-400 hover:text-white transition-colors"
                >FAQs</a
              >
            </li>
          </ul>
        </div>
        <div>
          <h3 class="text-lg font-semibold mb-4">Contact Us</h3>
          <ul class="space-y-3">
            <li class="flex items-start">
              <div
                class="w-5 h-5 flex items-center justify-center text-gray-400 mt-0.5"
              >
                <i class="ri-map-pin-line"></i>
              </div>
              <span class="ml-3 text-gray-400"
                >123 Dairy Farm Road, Green Valley, CA 94535</span
              >
            </li>
            <li class="flex items-start">
              <div
                class="w-5 h-5 flex items-center justify-center text-gray-400 mt-0.5"
              >
                <i class="ri-phone-line"></i>
              </div>
              <span class="ml-3 text-gray-400">+1 (555) 123-4567</span>
            </li>
            <li class="flex items-start">
              <div
                class="w-5 h-5 flex items-center justify-center text-gray-400 mt-0.5"
              >
                <i class="ri-mail-line"></i>
              </div>
              <span class="ml-3 text-gray-400">dairylift@gmail.com</span>
            </li>
            <li class="flex items-start">
              <div
                class="w-5 h-5 flex items-center justify-center text-gray-400 mt-0.5"
              >
                <i class="ri-time-line"></i>
              </div>
              <span class="ml-3 text-gray-400">Mon-Fri: 9AM-5PM (PST)</span>
            </li>
          </ul>
        </div>
        <div>
          <h3 class="text-lg font-semibold mb-4">Newsletter</h3>
          <p class="text-gray-400 mb-4">
            Subscribe to receive updates on dairy market trends and investment
            opportunities.
          </p>
          <form class="space-y-4">
            <div>
              <input
                type="email"
                placeholder="Your email address"
                class="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-primary text-white"
              />
            </div>
            <button
              type="submit"
              class="w-full bg-primary hover:bg-primary/90 text-white py-2 font-medium !rounded-button whitespace-nowrap"
            >
              Subscribe
            </button>
          </form>
        </div>
      </div>
      <div
        class="pt-8 border-t border-gray-800 flex flex-col md:flex-row justify-between items-center"
      >
        <p class="text-gray-400 text-sm">
          © 2025 Dairy-Lift. All rights reserved.
        </p>
        <div class="mt-4 md:mt-0 flex space-x-6">
          <a href="#" class="text-gray-400 hover:text-white text-sm"
            >Privacy Policy</a
          >
          <a href="#" class="text-gray-400 hover:text-white text-sm"
            >Terms of Service</a
          >
          <a href="#" class="text-gray-400 hover:text-white text-sm"
            >Cookie Policy</a
          >
        </div>
      </div>
    </div>
  </footer>

  <!-- Authentication Script -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize authentication UI
      if (window.DairyLiftAuth) {
        window.DairyLiftAuth.updateAuthUI();

        // Check if user is logged in, if not redirect to login page
        if (!window.DairyLiftAuth.isLoggedIn()) {
          window.location.href = 'login.html';
        }
      }
    });
  </script>
</body>
</html>
